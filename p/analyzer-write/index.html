<!doctype html><html lang=en-uk>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A step by step guide to writing an analyzer"><title>Roslyn Analyzer - writing the analyzer (Part 2)</title>
<link rel=canonical href=https://always-developing.github.io/p/analyzer-write/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Roslyn Analyzer - writing the analyzer (Part 2)">
<meta property="og:description" content="A step by step guide to writing an analyzer">
<meta property="og:url" content="https://always-developing.github.io/p/analyzer-write/">
<meta property="og:site_name" content="Always Developing">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="c#"><meta property="article:tag" content=".net"><meta property="article:tag" content="roslyn"><meta property="article:tag" content="codefix"><meta property="article:tag" content="code fix"><meta property="article:tag" content="analyser"><meta property="article:tag" content="analyzer"><meta property="article:tag" content="guide"><meta property="article:tag" content="entity framework"><meta property="article:tag" content="entityframework"><meta property="article:tag" content="ef"><meta property="article:tag" content="analyzer-series"><meta property="article:published_time" content="2021-11-25T02:00:00+02:00"><meta property="article:modified_time" content="2021-11-25T02:00:00+02:00">
<meta name=twitter:title content="Roslyn Analyzer - writing the analyzer (Part 2)">
<meta name=twitter:description content="A step by step guide to writing an analyzer">
<link rel="shortcut icon" href=favicon.ico>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CXPLFS7K38"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-CXPLFS7K38',{anonymize_ip:!1})}</script>
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=https://always-developing.github.io/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/categories/blog/>
Blog
</a>
<a href=/categories/series/>
Series
</a>
</header>
<h2 class=article-title>
<a href=/p/analyzer-write/>Roslyn Analyzer - writing the analyzer (Part 2)</a>
</h2>
<h3 class=article-subtitle>
A step by step guide to writing an analyzer
</h3>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Nov 25, 2021</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
10 minute read
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<p>All posts in the series:<br>
<strong>Part 1:</strong> <a class=link href=../analyzer-explained>Roslyn Analyzer - explained</a> <br>
<strong>Part 2:</strong> Roslyn Analyzer - writing an analyzer (this post)<br>
<strong>Part 3:</strong> <a class=link href=../analyzer-code-fix/>Roslyn Analyzer - writing a code fix</a><br>
<strong>Part 4:</strong> <a class=link href=../analyzer-test/>Roslyn Analyzer - testing an analyzer and code fix</a><br>
<strong>Part 5:</strong> <a class=link href=../analyzer-extra/>Roslyn Analyzer - tips and tricks</a></p>
<p>All code in the posts, including the sample project and working <code>analyzer</code> and <code>code fix</code> are <a class=link href=https://github.com/always-developing/CodeAnalysis.EntityFrameworkCore.Sample target=_blank rel=noopener>available on Github</a>.</p>
<h2 id=analyzer-introduction>Analyzer introduction</h2>
<p>To recap from the <a class=link href=../analyzer-explained>previous post in the series</a>, an <code>analyzer</code> is a piece of code which inspects code (C# or Visual Basic) during design and compile time, and based on the results of the inspection, can trigger a <strong>diagnostic</strong> as an <strong>Error, Warning</strong> or as <strong>Information</strong>.</p>
<p>This post will detail the various parts of the <code>analyzer</code>, how they fit together, and then explore creating a custom <code>analyzer</code>.</p>
<blockquote>
<div>
<div style=width:5%;float:left;vertical-align:middle;padding-right:60px>
<i class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-info-circle" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><line x1="12" y1="8" x2="12.01" y2="8"/><polyline points="11 12 12 12 12 16 13 16"/></svg></i>
</div>
<div>
<p>While the samples used in these posts and in the associated <a href=https://github.com/always-developing/CodeAnalysis.EntityFrameworkCore.Sample>Github repository</a> are working and practical, the code is NOT optimized, and also does not cater for all use cases scenarios and edge cases.<br>
The code should be used as a guide for writing a custom <code>analyzer</code> and <code>code fix</code> and not as-is for production use.</p>
</div>
</div>
</blockquote>
<hr>
<h2 id=analyzer-solution>Analyzer solution</h2>
<h3 id=creating-an-analyzer-project>Creating an analyzer project</h3>
<p>Creating the initial analyzer project is very simple - Visual Studio has a template for it!<br>
When creating a new project in Visual Studio, search for <em>analyzer</em> and select the C# <em>Analyzer with Code Fix (.NET Standard)</em> template.</p>
<p><figure class=gallery-image style=flex-grow:264;flex-basis:633px>
<a href=/p/analyzer-write/1.ProjectSelection.png data-size=700x265>
<img src=/p/analyzer-write/1.ProjectSelection.png width=700 height=265 srcset="/p/analyzer-write/1.ProjectSelection_hu7c07f03fb5105e408f1eb18f69829091_59864_480x0_resize_box_3.png 480w, /p/analyzer-write/1.ProjectSelection_hu7c07f03fb5105e408f1eb18f69829091_59864_1024x0_resize_box_3.png 1024w" loading=lazy alt="C# Analyzer with Code Fix (.NET Standard) project">
</a>
<figcaption>C# Analyzer with Code Fix (.NET Standard) project</figcaption>
</figure></p>
<p>If the project doesn&rsquo;t appear in the list, the .NET Compiler Platform SDK workload is most likely not installed. Modify the Visual Studio installation to confirm and install if required.</p>
<p><figure class=gallery-image style=flex-grow:192;flex-basis:461px>
<a href=/p/analyzer-write/2.ExtensionDevelopment2.png data-size=700x364>
<img src=/p/analyzer-write/2.ExtensionDevelopment2.png width=700 height=364 srcset="/p/analyzer-write/2.ExtensionDevelopment2_huf899301865720470f1585aada73b5225_93069_480x0_resize_box_3.png 480w, /p/analyzer-write/2.ExtensionDevelopment2_huf899301865720470f1585aada73b5225_93069_1024x0_resize_box_3.png 1024w" loading=lazy alt=".NET Compiler Platform SDK selection">
</a>
<figcaption>.NET Compiler Platform SDK selection</figcaption>
</figure></p>
<blockquote>
<div>
<div style=width:5%;float:left;vertical-align:middle;padding-right:60px>
<i class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-info-circle" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><line x1="12" y1="8" x2="12.01" y2="8"/><polyline points="11 12 12 12 12 16 13 16"/></svg></i>
</div>
<div>
<p>The various analyzer projects will be created with the target framework of .NET Standard 2.0 for the analyzer specific projects, and .NET Framework 4.7.2 for the VSIX project.<br>
These should remain as is - as Visual Studio was written using .NET Framework, extensions are required to target .NET Standard 2.0 and currently cannot target any later framework.</p>
</div>
</div>
</blockquote>
<hr>
<h3 id=structure-of-the-solution>Structure of the solution</h3>
<p>The default analyzer template will create 5 projects as part of the solution (in the order as they appear in the screenshot below):</p>
<ol>
<li>A project which contains the <code>analyzer</code> code</li>
<li>A project which contains the <code>code fix</code> code</li>
<li>A project used to create a NuGet package for the analyzer</li>
<li>A test project containing unit test (which is also invaluable for debugging while developing)</li>
<li>A VSIX project which creates the Visual Studio extension (also invaluable for testing while developing)</li>
</ol>
<p><figure class=gallery-image style=flex-grow:343;flex-basis:824px>
<a href=/p/analyzer-write/3.SolutionStructure.png data-size=512x149>
<img src=/p/analyzer-write/3.SolutionStructure.png width=512 height=149 srcset="/p/analyzer-write/3.SolutionStructure_hu9a5cdf6e66cf642e035007ebb17f06f8_14459_480x0_resize_box_3.png 480w, /p/analyzer-write/3.SolutionStructure_hu9a5cdf6e66cf642e035007ebb17f06f8_14459_1024x0_resize_box_3.png 1024w" loading=lazy alt="Structure of an analyzer solution (sample folder added manually)">
</a>
<figcaption>Structure of an analyzer solution (sample folder added manually)</figcaption>
</figure></p>
<hr>
<h2 id=the-analyzer>The analyzer</h2>
<h3 id=a-sample-application>A sample application</h3>
<p>Before starting to code the analyzer, a <strong><em>very strong</em></strong> suggestion is to create a small sample application which contains the scenario to trigger the <code>analyzer</code>.
This will be very useful when testing, as well as crucial when working out the syntax tree of the code (more on this below).</p>
<p>This sample project does not have to be at all complicated - the sample project (<a class=link href=https://github.com/always-developing/CodeAnalysis.EntityFrameworkCore.Sample target=_blank rel=noopener>available on Github</a>) just creates a connection to a Sqlite database, and applies a database migration. No other logic.</p>
<p>Personally I prefer to add the sample to my analyzer solution (useful when using the Syntax Visualizer), but then also create a separate solution which just contains just the sample project (useful when testing the analyzer as an extension).</p>
<p>See <a class=link href=../analyzer-explained>part 1 for a more in depth breakdown</a> of the the scenarios the custom <code>analyzers</code> are reporting on.</p>
<hr>
<h3 id=coding-the-analyzer>Coding the analyzer</h3>
<h4 id=analyzer-structure>Analyzer structure</h4>
<p>An analyzer class inherits from the <code>DiagnosticAnalyzer</code> class, and can be broken down into four parts:</p>
<ol>
<li><strong>The diagnostic setup</strong>: Configure the diagnostic information which appear when the analyzer reports feedback back to the developer</li>
<li><strong>Register the action</strong>: An Action (a method) is registered, along with a specific syntax kind (e.g. MethodInvocations or NamedTypes). The action/method will then be invoked whenever Roslyn encounters a syntax of that kind while running analysis.</li>
<li><strong>Interrogate the syntax tree</strong>: Once Roslyn calls the action/method setup in step 2, the syntax tree/code structure is interrogated to determine if the code is relevant for the <code>analyzer</code> and does a diagnostic need to be trigger</li>
<li><strong>Trigger the diagnostic result</strong>: The final step is to trigger a diagnostic with Roslyn so the results can be reported back</li>
</ol>
<hr>
<h4 id=diagnostic-setup>Diagnostic setup</h4>
<p>The first step is to setup the diagnostic information, the information which is reported back.</p>
<p>The template makes use of a resx file to allow for localization, however in the sample code <a class=link href=https://github.com/always-developing/CodeAnalysis.EntityFrameworkCore.Sample target=_blank rel=noopener>on Github</a> as well as in the example below, the resx has been removed and the messages put directly in code.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1> 1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2> 2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3> 3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4> 4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5> 5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6> 6</a>
</span><span class=lnt id=ienumusage-7><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-7> 7</a>
</span><span class=lnt id=ienumusage-8><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-8> 8</a>
</span><span class=lnt id=ienumusage-9><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-9> 9</a>
</span><span class=lnt id=ienumusage-10><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-10>10</a>
</span><span class=lnt id=ienumusage-11><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-11>11</a>
</span><span class=lnt id=ienumusage-12><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-12>12</a>
</span><span class=lnt id=ienumusage-13><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-13>13</a>
</span><span class=lnt id=ienumusage-14><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-14>14</a>
</span><span class=lnt id=ienumusage-15><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-15>15</a>
</span><span class=lnt id=ienumusage-16><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-16>16</a>
</span><span class=lnt id=ienumusage-17><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-17>17</a>
</span><span class=lnt id=ienumusage-18><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-18>18</a>
</span><span class=lnt id=ienumusage-19><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-19>19</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=k>public</span> <span class=k>const</span> <span class=kt>string</span> <span class=n>DiagnosticId</span> <span class=p>=</span> <span class=s>&#34;ADEF001&#34;</span><span class=p>;</span>

<span class=k>private</span> <span class=k>static</span> <span class=k>readonly</span> <span class=kt>string</span> <span class=n>Title</span> <span class=p>=</span> <span class=s>&#34;Release build auto-migration&#34;</span><span class=p>;</span>
<span class=k>private</span> <span class=k>static</span> <span class=k>readonly</span> <span class=kt>string</span> <span class=n>MessageFormat</span> <span class=p>=</span> <span class=s>&#34;It is recommended to only &#34;</span> <span class=p>+</span> 
    <span class=s>&#34;run auto-migrations in development environments&#34;</span><span class=p>;</span>

<span class=k>private</span> <span class=k>static</span> <span class=k>readonly</span> <span class=kt>string</span> <span class=n>Description</span> <span class=p>=</span> <span class=s>&#34;Best practice is to only run &#34;</span><span class=p>+</span> 
    <span class=s>&#34;auto-migrations in development environments and not &#34;</span> <span class=p>+</span> 
    <span class=s>&#34;in test or production environments - this should be done by a CI/CD pipeline.&#34;</span><span class=p>;</span>

<span class=k>private</span> <span class=k>const</span> <span class=kt>string</span> <span class=n>Category</span> <span class=p>=</span> <span class=s>&#34;Usage&#34;</span><span class=p>;</span>

<span class=k>private</span> <span class=k>static</span> <span class=k>readonly</span> <span class=n>DiagnosticDescriptor</span> <span class=n>rule001</span> <span class=p>=</span> 
    <span class=k>new</span> <span class=n>DiagnosticDescriptor</span><span class=p>(</span><span class=n>DiagnosticId</span><span class=p>,</span> <span class=n>Title</span><span class=p>,</span> 
    <span class=n>MessageFormat</span><span class=p>,</span> <span class=n>Category</span><span class=p>,</span> <span class=n>DiagnosticSeverity</span><span class=p>.</span><span class=n>Warning</span><span class=p>,</span> 
    <span class=n>isEnabledByDefault</span><span class=p>:</span> <span class=k>true</span><span class=p>,</span> <span class=n>description</span><span class=p>:</span> <span class=n>Description</span><span class=p>);</span>

<span class=k>public</span> <span class=k>override</span> <span class=n>ImmutableArray</span><span class=p>&lt;</span><span class=n>DiagnosticDescriptor</span><span class=p>&gt;</span> <span class=n>SupportedDiagnostics</span> 
    <span class=p>{</span> <span class=k>get</span> <span class=p>{</span> <span class=k>return</span> <span class=n>ImmutableArray</span><span class=p>.</span><span class=n>Create</span><span class=p>(</span><span class=n>rule001</span><span class=p>);</span> <span class=p>}</span> <span class=p>}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li><strong>Line 1:</strong> The unique identifier for the diagnostic being triggered</li>
<li><strong>Line 3:</strong> The title for the diagnostic</li>
<li><strong>Line 4:</strong> The message for the diagnostic</li>
<li><strong>Line 11:</strong> The category for the diagnostic (the type of <code>analyzer</code> - for example the default template analyzer has a category of <em>Naming</em>, while the above uses <em>Usage</em>)</li>
<li><strong>Line 13:</strong> Creates the actual rule using the information defined above</li>
<li><strong>Line 14:</strong> Exposes the rules the <code>analyzer</code> could potentially report (a single analyzer could trigger multiple types of diagnostic)</li>
</ul>
<p><figure class=gallery-image style=flex-grow:646;flex-basis:1552px>
<a href=/p/analyzer-write/DiagnosticReport.png data-size=886x137>
<img src=/p/analyzer-write/DiagnosticReport.png width=886 height=137 srcset="/p/analyzer-write/DiagnosticReport_hu058c5f7cdeb080dd72c798839b740e86_11380_480x0_resize_box_3.png 480w, /p/analyzer-write/DiagnosticReport_hu058c5f7cdeb080dd72c798839b740e86_11380_1024x0_resize_box_3.png 1024w" loading=lazy alt="The diagnostic result information displayed in Visual Studio">
</a>
<figcaption>The diagnostic result information displayed in Visual Studio</figcaption>
</figure></p>
<hr>
<h4 id=register-the-action>Register the action</h4>
<p>The next step is to register an action to be called when Roslyn finds a the type of code (syntax kind) the analyzer is interested in.</p>
<p>This is done in the overridden <em>Initialize</em> method.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1>1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2>2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3>3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4>4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5>5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6>6</a>
</span><span class=lnt id=ienumusage-7><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-7>7</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=k>public</span> <span class=k>override</span> <span class=k>void</span> <span class=n>Initialize</span><span class=p>(</span><span class=n>AnalysisContext</span> <span class=n>context</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>context</span><span class=p>.</span><span class=n>ConfigureGeneratedCodeAnalysis</span><span class=p>(</span><span class=n>GeneratedCodeAnalysisFlags</span><span class=p>.</span><span class=n>None</span><span class=p>);</span>
    <span class=n>context</span><span class=p>.</span><span class=n>EnableConcurrentExecution</span><span class=p>();</span>

    <span class=n>context</span><span class=p>.</span><span class=n>RegisterSyntaxNodeAction</span><span class=p>(</span><span class=n>AnalyzeExpression</span><span class=p>,</span> <span class=n>SyntaxKind</span><span class=p>.</span><span class=n>InvocationExpression</span><span class=p>);</span>
<span class=p>}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li><strong>Line 3-4:</strong> Default configuration. For most <code>analyzers</code> this does not need to be changed</li>
<li><strong>Line 6:</strong>. This is the important line, which registers the <code>AnalyzeExpression</code> method to be called when Roslyn finds a piece of code which is of type <code>InvocationExpression</code> (a method call).</li>
</ul>
<p>There are a large number of <code>SyntaxKinds</code> which can be used to trigger a call to the action method.</p>
<p>The <code>analyzer</code> is starting to take form, with the details of the rule defined, as well as an action registered, to be called when the <code>syntax kind</code> in question is found by Roslyn.</p>
<hr>
<h4 id=interrogate-the-syntax-tree>Interrogate the syntax tree</h4>
<p>See the <a class=link href=../analyzer-explained/#a-working-sample-analyzer>&ldquo;Working Sample Analyzer&rdquo;</a> section in the previous post for more information regarding what this customer <code>analyzer</code> is doing. In short though, the <code>analyser</code> is looking for a very specific method called <em>Migrate</em> on a parent called <em>Database</em> (so <em>Database.Migrate()</em>), which should only be called in debug configuration.</p>
<p>This is where most of the <code>analyzer</code> work happens - the syntax node and syntax tree are interrogated to determine if the diagnostic should be triggered or not.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1> 1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2> 2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3> 3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4> 4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5> 5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6> 6</a>
</span><span class=lnt id=ienumusage-7><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-7> 7</a>
</span><span class=lnt id=ienumusage-8><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-8> 8</a>
</span><span class=lnt id=ienumusage-9><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-9> 9</a>
</span><span class=lnt id=ienumusage-10><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-10>10</a>
</span><span class=lnt id=ienumusage-11><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-11>11</a>
</span><span class=lnt id=ienumusage-12><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-12>12</a>
</span><span class=lnt id=ienumusage-13><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-13>13</a>
</span><span class=lnt id=ienumusage-14><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-14>14</a>
</span><span class=lnt id=ienumusage-15><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-15>15</a>
</span><span class=lnt id=ienumusage-16><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-16>16</a>
</span><span class=lnt id=ienumusage-17><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-17>17</a>
</span><span class=lnt id=ienumusage-18><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-18>18</a>
</span><span class=lnt id=ienumusage-19><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-19>19</a>
</span><span class=lnt id=ienumusage-20><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-20>20</a>
</span><span class=lnt id=ienumusage-21><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-21>21</a>
</span><span class=lnt id=ienumusage-22><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-22>22</a>
</span><span class=lnt id=ienumusage-23><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-23>23</a>
</span><span class=lnt id=ienumusage-24><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-24>24</a>
</span><span class=lnt id=ienumusage-25><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-25>25</a>
</span><span class=lnt id=ienumusage-26><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-26>26</a>
</span><span class=lnt id=ienumusage-27><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-27>27</a>
</span><span class=lnt id=ienumusage-28><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-28>28</a>
</span><span class=lnt id=ienumusage-29><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-29>29</a>
</span><span class=lnt id=ienumusage-30><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-30>30</a>
</span><span class=lnt id=ienumusage-31><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-31>31</a>
</span><span class=lnt id=ienumusage-32><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-32>32</a>
</span><span class=lnt id=ienumusage-33><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-33>33</a>
</span><span class=lnt id=ienumusage-34><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-34>34</a>
</span><span class=lnt id=ienumusage-35><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-35>35</a>
</span><span class=lnt id=ienumusage-36><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-36>36</a>
</span><span class=lnt id=ienumusage-37><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-37>37</a>
</span><span class=lnt id=ienumusage-38><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-38>38</a>
</span><span class=lnt id=ienumusage-39><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-39>39</a>
</span><span class=lnt id=ienumusage-40><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-40>40</a>
</span><span class=lnt id=ienumusage-41><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-41>41</a>
</span><span class=lnt id=ienumusage-42><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-42>42</a>
</span><span class=lnt id=ienumusage-43><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-43>43</a>
</span><span class=lnt id=ienumusage-44><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-44>44</a>
</span><span class=lnt id=ienumusage-45><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-45>45</a>
</span><span class=lnt id=ienumusage-46><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-46>46</a>
</span><span class=lnt id=ienumusage-47><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-47>47</a>
</span><span class=lnt id=ienumusage-48><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-48>48</a>
</span><span class=lnt id=ienumusage-49><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-49>49</a>
</span><span class=lnt id=ienumusage-50><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-50>50</a>
</span><span class=lnt id=ienumusage-51><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-51>51</a>
</span><span class=lnt id=ienumusage-52><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-52>52</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=k>private</span> <span class=k>static</span> <span class=k>void</span> <span class=n>AnalyzeExpression</span><span class=p>(</span><span class=n>SyntaxNodeAnalysisContext</span> <span class=n>context</span><span class=p>)</span>
<span class=p>{</span>
    <span class=c1>// We know the node is of type InvocationExpressionSyntax as the callback
</span><span class=c1></span>    <span class=c1>// registration was only for SyntaxKind.InvocationExpression
</span><span class=c1></span>    <span class=kt>var</span> <span class=n>invocationExpr</span> <span class=p>=</span> <span class=p>(</span><span class=n>InvocationExpressionSyntax</span><span class=p>)</span><span class=n>context</span><span class=p>.</span><span class=n>Node</span><span class=p>;</span>

    <span class=c1>// InvocationExpr.Expression is the method name, the expression before &#34;(&#34;. 
</span><span class=c1></span>    <span class=c1>// In our case Database.Migrate
</span><span class=c1></span>    <span class=kt>var</span> <span class=n>memberAccessExpr</span> <span class=p>=</span> <span class=n>invocationExpr</span><span class=p>.</span><span class=n>Expression</span> <span class=k>as</span> <span class=n>MemberAccessExpressionSyntax</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>memberAccessExpr</span> <span class=p>==</span> <span class=k>null</span><span class=p>)</span>
        <span class=k>return</span><span class=p>;</span>

    <span class=c1>// Get the expression. In our case, Database
</span><span class=c1></span>    <span class=kt>var</span> <span class=n>bindingExpression</span> <span class=p>=</span> <span class=n>memberAccessExpr</span><span class=p>.</span><span class=n>Expression</span> <span class=k>as</span> <span class=n>MemberBindingExpressionSyntax</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>bindingExpression</span> <span class=p>==</span> <span class=k>null</span><span class=p>)</span>
        <span class=k>return</span><span class=p>;</span>

    <span class=c1>// Get the memberAccessExpr name of the expression.
</span><span class=c1></span>    <span class=c1>// In our case, Migrate
</span><span class=c1></span>    <span class=kt>var</span> <span class=n>expressionName</span> <span class=p>=</span> <span class=n>bindingExpression</span><span class=p>.</span><span class=n>Name</span> <span class=k>as</span> <span class=n>IdentifierNameSyntax</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>expressionName</span> <span class=p>==</span> <span class=k>null</span><span class=p>)</span>
        <span class=k>return</span><span class=p>;</span>

    <span class=c1>// If we reach this far, make sure its the Database property
</span><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=n>expressionName</span><span class=p>.</span><span class=n>Identifier</span><span class=p>.</span><span class=n>ToString</span><span class=p>().</span><span class=n>ToLower</span><span class=p>()</span> <span class=p>!=</span> <span class=s>&#34;Database&#34;</span><span class=p>.</span><span class=n>ToLower</span><span class=p>())</span>
        <span class=k>return</span><span class=p>;</span>

    <span class=c1>// Get the memberAccessExpr name of the expression.
</span><span class=c1></span>    <span class=c1>// In our case, Migrate
</span><span class=c1></span>    <span class=kt>var</span> <span class=n>identifierName</span> <span class=p>=</span> <span class=n>memberAccessExpr</span><span class=p>.</span><span class=n>Name</span> <span class=k>as</span> <span class=n>IdentifierNameSyntax</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>identifierName</span> <span class=p>==</span> <span class=k>null</span><span class=p>)</span>
        <span class=k>return</span><span class=p>;</span>

    <span class=c1>// check if its the specific method we want to analyze
</span><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=n>identifierName</span><span class=p>.</span><span class=n>Identifier</span><span class=p>.</span><span class=n>ToString</span><span class=p>().</span><span class=n>ToLower</span><span class=p>()</span> <span class=p>==</span> <span class=s>&#34;Migrate&#34;</span><span class=p>.</span><span class=n>ToLower</span><span class=p>())</span>
    <span class=p>{</span>
        <span class=kt>var</span> <span class=n>closestIfDirective</span> <span class=p>=</span> <span class=n>CodeAnalysisHelper</span><span class=p>.</span><span class=n>GetClosestIfDirective</span><span class=p>(</span>
                <span class=n>memberAccessExpr</span><span class=p>,</span> <span class=n>context</span><span class=p>.</span><span class=n>SemanticModel</span><span class=p>.</span><span class=n>SyntaxTree</span><span class=p>.</span><span class=n>GetRoot</span><span class=p>());</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>closestIfDirective</span> <span class=p>!=</span> <span class=k>null</span><span class=p>)</span>
        <span class=p>{</span>
            <span class=k>if</span><span class=p>(</span><span class=n>CodeAnalysisHelper</span><span class=p>.</span><span class=n>IsValidIfDirective</span><span class=p>(</span><span class=n>closestIfDirective</span><span class=p>))</span>
            <span class=p>{</span>
                <span class=k>return</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=c1>// report the error if we found the method and it didn&#39;t have the 
</span><span class=c1></span>        <span class=c1>// directives expected
</span><span class=c1></span>        <span class=kt>var</span> <span class=n>diagnostic001</span> <span class=p>=</span> <span class=n>Diagnostic</span><span class=p>.</span><span class=n>Create</span><span class=p>(</span><span class=n>rule001</span><span class=p>,</span> <span class=n>identifierName</span><span class=p>.</span><span class=n>GetLocation</span><span class=p>());</span>
        <span class=n>context</span><span class=p>.</span><span class=n>ReportDiagnostic</span><span class=p>(</span><span class=n>diagnostic001</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span></code></pre></td></tr></table>
</div>
</div>
<p>As the <code>AnalyzeExpression</code> method is called every time the syntax kind registered (<em>InvocationExpression</em> in this case) is found in code, the analyzer needs to ignore any <em>InvocationExpression</em>&rsquo;s which are not relevant to it.</p>
<ul>
<li><strong>Lines 5-35</strong>: These lines interrogate the syntax tree to make sure the <em>InvocationExpression</em> is the one relevant to it - <strong>Database.Migrate()</strong></li>
<li><strong>Line 37-38</strong>: A helper method is called to find the closest <code>#if directive</code> which occurs before the <strong>Database.Migrate()</strong> call</li>
<li><strong>Line 41</strong>: A helper method is called to check if the <code>#if directive</code> contains a valid condition</li>
<li><strong>Line 49-50</strong>: All necessary checks are complete and the diagnostic is triggered with Roslyn</li>
</ul>
<p>These step can be very tricky to get right, and sometimes requires a lot of trial and error and debugging to get right. Working with the syntax tree can be complex depending on what the <code>analyzer</code> is looking for.</p>
<p>However the <code>Syntax Visualizer</code> does make it easier.</p>
<p>This is an iterative process, using the below three methods to debug, inspect the code and syntax tree, and making tweaks to the various <code>analyzer</code> checks:</p>
<ul>
<li>Use of the <code>Syntax Visualizer</code></li>
<li>Use of the <code>unit test infrastructure</code> for analyzers</li>
<li>Executing the <code>VSIX project</code> (which starts up a new instance of Visual Studio with the analyzer installed as an extension)</li>
</ul>
<hr>
<h5 id=the-syntax-visualizer>The Syntax Visualizer</h5>
<p>Visual Studio comes with a built in tool window called the <code>Syntax Visualizer</code>, which can be found under the <code>View -> Other Windows -> Syntax Visualizer</code>.</p>
<p>This window will track the current active code window, and display the syntax tree of the active code, in a hierarchical structure.<br>
Selecting various pieces of the code will cause the highlighted item in the <code>Syntax Visualizer</code> to change and track the active item in code.</p>
<p>This is invaluable in determining which <code>SyntaxKind</code> to register (as described in the <a class=link href=#register-the-action>&ldquo;register the action&rdquo;</a> section ), as well as how to traverse the tree to find the relevant syntax nodes to trigger the diagnostic being registered.</p>
<p>The <code>Syntax Visualizer</code> + the sample project created in the <a class=link href=#creating-an-analyzer-project>&ldquo;creating an analyzer project&rdquo;</a> section, are key in correctly determining the logic of the analyzer. The below screen shot show the <code>Syntax Visualizer</code> reflecting the part of the <code>syntax tree</code> for the <strong>Migrate()</strong> method.</p>
<p>Notice how the tree matches the checks done in the code in the <a class=link href=#interrogate-the-syntax-tree>above section:</a>:<br>
<code>InvocationExpression -> MemberAccessExpression -> MemberBindingExpression -> IdentifierName</code></p>
<p><figure class=gallery-image style=flex-grow:222;flex-basis:533px>
<a href=/p/analyzer-write/SyntaxVisualizer.png data-size=930x418>
<img src=/p/analyzer-write/SyntaxVisualizer.png width=930 height=418 srcset="/p/analyzer-write/SyntaxVisualizer_hu2c69549fc581dd2251a0c3d99615d337_93142_480x0_resize_box_3.png 480w, /p/analyzer-write/SyntaxVisualizer_hu2c69549fc581dd2251a0c3d99615d337_93142_1024x0_resize_box_3.png 1024w" loading=lazy alt="The Syntax Visualizer used in the sample project">
</a>
<figcaption>The Syntax Visualizer used in the sample project</figcaption>
</figure></p>
<hr>
<h4 id=trigger-the-diagnostics>Trigger the diagnostics</h4>
<p>Once the code has been interrogated and it has been determined feedback needs to be given, the final step is to trigger and register the diagnostic with Roslyn.</p>
<p>The diagnostic information and rule created in <a class=link href=#diagnostic-setup>&ldquo;diagnostic setup&rdquo;</a>, is reported at a specific location.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1>1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2>2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3>3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4>4</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=c1>// report the error if we found the method and it didn&#39;t have the 
</span><span class=c1>// directives expected
</span><span class=c1></span><span class=kt>var</span> <span class=n>diagnostic001</span> <span class=p>=</span> <span class=n>Diagnostic</span><span class=p>.</span><span class=n>Create</span><span class=p>(</span><span class=n>rule001</span><span class=p>,</span> <span class=n>identifierName</span><span class=p>.</span><span class=n>GetLocation</span><span class=p>());</span>
<span class=n>context</span><span class=p>.</span><span class=n>ReportDiagnostic</span><span class=p>(</span><span class=n>diagnostic001</span><span class=p>);</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li><strong>Line 3</strong>: The diagnostic is created, with a specific rule and a specific location. This location will be where the squiggle appears in code when the diagnostic is triggered.</li>
<li><strong>Line 4</strong>: The diagnostic is finally triggered with Roslyn.</li>
</ul>
<h2 id=next-steps-coding-the-code-fix>Next steps: Coding the code fix</h2>
<p>Next up, <a class=link href=../analyzer-code-fix/>part 3 in the series</a> will go into detail and expand on coding the <code>code fix</code> for our analyzer, which will fix the code the <code>analyzer</code> has determined to be incorrect.</p>
<hr>
<h2 id=useful-links>Useful links</h2>
<p><a class=link href=https://github.com/dotnet/roslyn target=_blank rel=noopener>Roslyn repository</a><br>
<a class=link href=https://github.com/always-developing/CodeAnalysis.EntityFrameworkCore.Sample target=_blank rel=noopener>Sample analyzer and code fix repository</a></p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/c#/>c#</a>
<a href=/tags/.net/>.net</a>
<a href=/tags/roslyn/>roslyn</a>
<a href=/tags/codefix/>codefix</a>
<a href=/tags/code-fix/>code fix</a>
<a href=/tags/analyser/>analyser</a>
<a href=/tags/analyzer/>analyzer</a>
<a href=/tags/guide/>guide</a>
<a href=/tags/entity-framework/>entity framework</a>
<a href=/tags/entityframework/>entityframework</a>
<a href=/tags/ef/>ef</a>
<a href=/tags/analyzer-series/>analyzer-series</a>
</section>
</footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>Related contents</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/p/analyzer-explained/>
<div class=article-details>
<h2 class=article-title>Roslyn Analyzer - explained (Part 1)</h2>
</div>
</a>
</article>
<article>
<a href=/p/multiple-implementations/>
<div class=article-details>
<h2 class=article-title>Multiple implementations of same interface - the options</h2>
</div>
</a>
</article>
<article>
<a href=/p/vs-keyboard-shortcuts/>
<div class=article-details>
<h2 class=article-title>Useful Visual Studio keyboard shortcuts</h2>
</div>
</a>
</article>
<article>
<a href=/p/string-vs-string/>
<div class=article-details>
<h2 class=article-title>C# String vs string</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<script src=https://giscus.app/client.js data-repo=always-developing/always-developing.github.io data-repo-id=R_kgDOGQJLBQ data-category=Comments data-category-id=DIC_kwDOGQJLBc4B_pUA data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-theme=light crossorigin=anonymous async></script>
<script>function setGiscusTheme(b){let a=document.querySelector('iframe.giscus-frame');a&&a.contentWindow.postMessage({giscus:{setConfig:{theme:b}}},"https://giscus.app")}(function(){addEventListener('message',b=>{if(event.origin!=='https://giscus.app')return;a()}),window.addEventListener('onColorSchemeChange',a);function a(){document.documentElement.dataset.scheme==="light"?setGiscusTheme('light'):setGiscusTheme('dark')}})()</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2022 Always Developing
</section>
<section class=powerby>
Always Developing | always learning | always growing <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.2.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#analyzer-introduction>Analyzer introduction</a></li>
<li><a href=#analyzer-solution>Analyzer solution</a>
<ol>
<li><a href=#creating-an-analyzer-project>Creating an analyzer project</a></li>
<li><a href=#structure-of-the-solution>Structure of the solution</a></li>
</ol>
</li>
<li><a href=#the-analyzer>The analyzer</a>
<ol>
<li><a href=#a-sample-application>A sample application</a></li>
<li><a href=#coding-the-analyzer>Coding the analyzer</a>
<ol>
<li><a href=#analyzer-structure>Analyzer structure</a></li>
<li><a href=#diagnostic-setup>Diagnostic setup</a></li>
<li><a href=#register-the-action>Register the action</a></li>
<li><a href=#interrogate-the-syntax-tree>Interrogate the syntax tree</a></li>
<li><a href=#trigger-the-diagnostics>Trigger the diagnostics</a></li>
</ol>
</li>
</ol>
</li>
<li><a href=#next-steps-coding-the-code-fix>Next steps: Coding the code fix</a></li>
<li><a href=#useful-links>Useful links</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>