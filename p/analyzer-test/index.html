<!doctype html><html lang=en-uk>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A step by step guide to testing an analyzer and code fix"><title>Roslyn Analyzer - testing an analyzer and code fix (Part 4)</title>
<link rel=canonical href=https://always-developing.github.io/p/analyzer-test/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Roslyn Analyzer - testing an analyzer and code fix (Part 4)">
<meta property="og:description" content="A step by step guide to testing an analyzer and code fix">
<meta property="og:url" content="https://always-developing.github.io/p/analyzer-test/">
<meta property="og:site_name" content="Always Developing">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="c#"><meta property="article:tag" content=".net"><meta property="article:tag" content="roslyn"><meta property="article:tag" content="codefix"><meta property="article:tag" content="code fix"><meta property="article:tag" content="analyser"><meta property="article:tag" content="analyzer"><meta property="article:tag" content="guide"><meta property="article:tag" content="entity framework"><meta property="article:tag" content="entityframework"><meta property="article:tag" content="ef"><meta property="article:tag" content="analyzer-series"><meta property="article:published_time" content="2021-11-27T04:00:00+02:00"><meta property="article:modified_time" content="2021-11-27T04:00:00+02:00">
<meta name=twitter:title content="Roslyn Analyzer - testing an analyzer and code fix (Part 4)">
<meta name=twitter:description content="A step by step guide to testing an analyzer and code fix">
<link rel="shortcut icon" href=favicon.ico>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CXPLFS7K38"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-CXPLFS7K38',{anonymize_ip:!1})}</script>
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=https://always-developing.github.io/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/categories/blog/>
Blog
</a>
<a href=/categories/series/>
Series
</a>
</header>
<h2 class=article-title>
<a href=/p/analyzer-test/>Roslyn Analyzer - testing an analyzer and code fix (Part 4)</a>
</h2>
<h3 class=article-subtitle>
A step by step guide to testing an analyzer and code fix
</h3>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Nov 27, 2021</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
8 minute read
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<p>All posts in the series:<br>
<strong>Part 1:</strong> <a class=link href=../analyzer-explained>Roslyn Analyzer - explained</a> <br>
<strong>Part 2:</strong> <a class=link href=../analyzer-write/>Roslyn Analyzer - writing an analyzer</a><br>
<strong>Part 3:</strong> <a class=link href=../analyzer-code-fix/>Roslyn Analyzer - writing a code fix</a><br>
<strong>Part 4:</strong> Roslyn Analyzer - testing an analyzer and code fix (this post)<br>
<strong>Part 5:</strong> <a class=link href=../analyzer-extra/>Roslyn Analyzer - tips and tricks</a></p>
<p>All code in the posts, including the sample project and working <code>analyzer</code> and <code>code fix</code> are <a class=link href=https://github.com/always-developing/CodeAnalysis.EntityFrameworkCore.Sample target=_blank rel=noopener>available on Github</a>.</p>
<h2 id=analyzer-unit-test-introduction>Analyzer unit test introduction</h2>
<p>The previous posts in the series detail how to <a class=link href=../analyzer-write>write an analyzer</a> and <a class=link href=../analyzer-code-fix>code fix</a>.</p>
<p>This post details writing unit tests to help ensure the stability of the code, but also aid in the development process by providing a quick and easy way to debug and test the <code>analyzer</code> and <code>code fix</code>.</p>
<hr>
<h2 id=why-write-unit-tests>Why write unit tests?</h2>
<p><code>Analyzers</code> are not simple to test - to &ldquo;run&rdquo; an analyzer, a new instance of Visual Studio starts up with the <code>analyzer</code> installed as an extension. An application (which has the code needed to test the <code>analyzer</code>) then needs to be opened to cause the <code>analyzer</code> trigger.<br>
While this definitely has a place when testing (hence the suggestion of <a class=link href=../analyzer-write/#a-sample-application>creating a sample application for the analyzer</a>), this process to often be inconsistent, with the updated <code>analyzer</code> not always being installed in the new instance of Visual Studio, or the breakpoints in the <code>analyzer</code> not being hit.</p>
<p>Unit tests provide a convenient and comparatively quick way to debug and iterate while coding the <code>analyzer</code> and <code>code fix</code>.</p>
<p>Luckily, writing unit tests are fairly straight forward. In addition a test framework is available for the testing of <code>analyzers</code> and <code>code fixes</code>.</p>
<hr>
<h2 id=default-unit-tests>Default unit tests</h2>
<h3 id=wrapper-classes>Wrapper classes</h3>
<p>As part of the <code>analyzer</code> template, a unit test project is automatically created.<br>
This template has:</p>
<ul>
<li>A sample <code>analyzer</code> test, using the a VerifyCS.<em>VerifyAnalyzerAsync</em> method</li>
<li>A sample verify <code>code fix</code> test, using a VerifyCS.<em>VerifyCodeFixAsync</em> method</li>
</ul>
<p>The <em>VerifyCS</em> class is an auto-generated class, which wraps a lot of the complexity of the underlying testing framework classes - while this is great when first working with <code>analyzers</code> and is easy to use for simple use cases, more complex use cases require more configuration and its generally easier to just use the underlying wrapped classes directly.</p>
<p>Using the <em>VerifyCS</em> class to test an <code>analyzer</code> is straightforward though:</p>
<ol>
<li>Define a block of code as a string</li>
<li>Define the list of diagnostic result the code should produce (and the location in the code)</li>
<li>Call <em>VerifyCS.VerifyAnalyzerAsync()</em></li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1>1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2>2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3>3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4>4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5>5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6>6</a>
</span><span class=lnt id=ienumusage-7><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-7>7</a>
</span><span class=lnt id=ienumusage-8><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-8>8</a>
</span><span class=lnt id=ienumusage-9><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-9>9</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=c1>//No diagnostics expected to show up
</span><span class=c1></span><span class=na>[TestMethod]</span>
<span class=k>public</span> <span class=k>async</span> <span class=n>Task</span> <span class=n>TestMethod1</span><span class=p>()</span>
<span class=p>{</span>
    <span class=kt>var</span> <span class=n>test</span> <span class=p>=</span> <span class=s>@&#34;&#34;</span><span class=p>;</span>

    <span class=c1>// No code, so no diagnostic will be triggered
</span><span class=c1></span>    <span class=k>await</span> <span class=n>VerifyCS</span><span class=p>.</span><span class=n>VerifyAnalyzerAsync</span><span class=p>(</span><span class=n>test</span><span class=p>);</span>
<span class=p>}</span></code></pre></td></tr></table>
</div>
</div>
<p>Using the <em>VerifyCS</em> class to test a <code>code fix</code>:</p>
<ol>
<li>Define a initial state block of code as a string</li>
<li>Define the list of diagnostic result the code should produce (and the location in the code)</li>
<li>Define a final state block of code as a string (what the code would look like after the code fix has been applied)</li>
<li>Call <em>VerifyCS.VerifyCodeFixAsync()</em></li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1> 1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2> 2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3> 3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4> 4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5> 5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6> 6</a>
</span><span class=lnt id=ienumusage-7><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-7> 7</a>
</span><span class=lnt id=ienumusage-8><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-8> 8</a>
</span><span class=lnt id=ienumusage-9><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-9> 9</a>
</span><span class=lnt id=ienumusage-10><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-10>10</a>
</span><span class=lnt id=ienumusage-11><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-11>11</a>
</span><span class=lnt id=ienumusage-12><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-12>12</a>
</span><span class=lnt id=ienumusage-13><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-13>13</a>
</span><span class=lnt id=ienumusage-14><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-14>14</a>
</span><span class=lnt id=ienumusage-15><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-15>15</a>
</span><span class=lnt id=ienumusage-16><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-16>16</a>
</span><span class=lnt id=ienumusage-17><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-17>17</a>
</span><span class=lnt id=ienumusage-18><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-18>18</a>
</span><span class=lnt id=ienumusage-19><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-19>19</a>
</span><span class=lnt id=ienumusage-20><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-20>20</a>
</span><span class=lnt id=ienumusage-21><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-21>21</a>
</span><span class=lnt id=ienumusage-22><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-22>22</a>
</span><span class=lnt id=ienumusage-23><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-23>23</a>
</span><span class=lnt id=ienumusage-24><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-24>24</a>
</span><span class=lnt id=ienumusage-25><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-25>25</a>
</span><span class=lnt id=ienumusage-26><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-26>26</a>
</span><span class=lnt id=ienumusage-27><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-27>27</a>
</span><span class=lnt id=ienumusage-28><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-28>28</a>
</span><span class=lnt id=ienumusage-29><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-29>29</a>
</span><span class=lnt id=ienumusage-30><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-30>30</a>
</span><span class=lnt id=ienumusage-31><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-31>31</a>
</span><span class=lnt id=ienumusage-32><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-32>32</a>
</span><span class=lnt id=ienumusage-33><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-33>33</a>
</span><span class=lnt id=ienumusage-34><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-34>34</a>
</span><span class=lnt id=ienumusage-35><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-35>35</a>
</span><span class=lnt id=ienumusage-36><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-36>36</a>
</span><span class=lnt id=ienumusage-37><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-37>37</a>
</span><span class=lnt id=ienumusage-38><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-38>38</a>
</span><span class=lnt id=ienumusage-39><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-39>39</a>
</span><span class=lnt id=ienumusage-40><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-40>40</a>
</span><span class=lnt id=ienumusage-41><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-41>41</a>
</span><span class=lnt id=ienumusage-42><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-42>42</a>
</span><span class=lnt id=ienumusage-43><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-43>43</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=c1>//Diagnostic and CodeFix both triggered and checked for
</span><span class=c1></span><span class=na>    [TestMethod]</span>
    <span class=k>public</span> <span class=k>async</span> <span class=n>Task</span> <span class=n>TestMethod2</span><span class=p>()</span>
    <span class=p>{</span>
        <span class=c1>// define the initial code block
</span><span class=c1></span>        <span class=kt>var</span> <span class=n>test</span> <span class=p>=</span> <span class=s>@&#34;
</span><span class=s>using System;
</span><span class=s>using System.Collections.Generic;
</span><span class=s>using System.Linq;
</span><span class=s>using System.Text;
</span><span class=s>using System.Threading.Tasks;
</span><span class=s>using System.Diagnostics;
</span><span class=s>
</span><span class=s>namespace ConsoleApplication1
</span><span class=s>{
</span><span class=s>    class {|#0:TypeName|}
</span><span class=s>    {   
</span><span class=s>    }
</span><span class=s>}&#34;</span><span class=p>;</span>

        <span class=c1>// define the final state code block
</span><span class=c1></span>        <span class=kt>var</span> <span class=n>fixtest</span> <span class=p>=</span> <span class=s>@&#34;
</span><span class=s>using System;
</span><span class=s>using System.Collections.Generic;
</span><span class=s>using System.Linq;
</span><span class=s>using System.Text;
</span><span class=s>using System.Threading.Tasks;
</span><span class=s>using System.Diagnostics;
</span><span class=s>
</span><span class=s>namespace ConsoleApplication1
</span><span class=s>{
</span><span class=s>    class TYPENAME
</span><span class=s>    {   
</span><span class=s>    }
</span><span class=s>}&#34;</span><span class=p>;</span>
        <span class=c1>// Expected diagnostics to be triggered
</span><span class=c1></span>        <span class=kt>var</span> <span class=n>expected</span> <span class=p>=</span> <span class=n>VerifyCS</span><span class=p>.</span><span class=n>Diagnostic</span><span class=p>(</span><span class=s>&#34;Analyzer1&#34;</span><span class=p>)</span>
            <span class=p>.</span><span class=n>WithLocation</span><span class=p>(</span><span class=m>0</span><span class=p>).</span><span class=n>WithArguments</span><span class=p>(</span><span class=s>&#34;TypeName&#34;</span><span class=p>);</span>

        <span class=c1>// Verify the diagnostic will be triggered, 
</span><span class=c1></span>        <span class=c1>// and that the code fix applies successfully
</span><span class=c1></span>        <span class=k>await</span> <span class=n>VerifyCS</span><span class=p>.</span><span class=n>VerifyCodeFixAsync</span><span class=p>(</span><span class=n>test</span><span class=p>,</span> <span class=n>expected</span><span class=p>,</span> <span class=n>fixtest</span><span class=p>);</span>
    <span class=p>}</span></code></pre></td></tr></table>
</div>
</div>
<hr>
<h3 id=complex-use-cases>Complex use cases</h3>
<p>There are a few use cases where I&rsquo;ve found <strong>NOT</strong> using <em>VerifyCS</em> easier (although it is still possible to use it):</p>
<ul>
<li>If the code block requires external dependencies to compile (such as a NuGet package)</li>
<li>If the code block is using some of the .NET 6 features (such as the minimal startup with the implicit main method)</li>
<li>If the <code>analyzer</code> requires additional files, such as an appsettings.json file.</li>
<li>If the build config (or any preprocessor symbol) makes a different to the analyzer</li>
</ul>
<p>For these reasons, I generally <code>do not use VerifyCS</code>, but use the underlying framework classes directly instead.</p>
<hr>
<h2 id=enhanced-unit-tests>Enhanced unit tests</h2>
<p>The steps for using the framework classes directly (<em>CSharpAnalyzerTest</em>) are similar to using the wrapper class:</p>
<p>Using the <em>CSharpAnalyzerTest</em> class to test an analyzer:</p>
<ol>
<li>Define a block of code as a string</li>
<li>Define the list of diagnostic result the code should produce (and the location in the code)</li>
<li>Define any additional configuration</li>
<li>Call <em>RunAsync()</em></li>
</ol>
<p>To test a code fix using <em>CSharpCodeFixTest</em>:</p>
<ol>
<li>Define a initial state block of code as a string</li>
<li>Define the list of diagnostic result the code should produce (and the location in the code)</li>
<li>Define a final state block of code as a string (what the code would look like after the code fix has been applied)</li>
<li>Define any additional configuration for both the initial and final state</li>
<li>Call <em>RunAsync()</em></li>
</ol>
<p>Lets go through these steps in details in the next sections.</p>
<hr>
<h3 id=defining-the-code>Defining the code</h3>
<h4 id=analyzer-test-code>Analyzer test code</h4>
<p>Although the analyzer and code fix test use different test classes, the setup is very similar.</p>
<p>With the configuration for an <code>analyzer</code>, the <em>TestState</em> is set - the <strong>sourceCode</strong> variable is a string with C# code as text.
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1>1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2>2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3>3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4>4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5>5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6>6</a>
</span><span class=lnt id=ienumusage-7><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-7>7</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=kt>var</span> <span class=n>analyzerTest</span> <span class=p>=</span>  <span class=k>new</span> <span class=n>CSharpAnalyzerTest</span><span class=p>&lt;</span><span class=n>DevOnlyMigrateAnalyzer</span><span class=p>,</span> <span class=n>MSTestVerifier</span><span class=p>&gt;</span>
<span class=p>{</span>
    <span class=n>TestState</span> <span class=p>=</span>
    <span class=p>{</span>
        <span class=n>Sources</span> <span class=p>=</span> <span class=p>{</span> <span class=n>sourceCode</span> <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span></code></pre></td></tr></table>
</div>
</div></p>
<h4 id=code-fix-test-code>Code fix test code</h4>
<p>With the configuration for a <code>code fix</code>, the <em>TestState</em> is set, as well as the source code for the expected <em>FinalState</em>. The final state is the expected code after the code fix has been applied. Again, both <strong>sourceCode</strong> and <strong>fixedCode</strong> are C# code as text.
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1> 1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2> 2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3> 3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4> 4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5> 5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6> 6</a>
</span><span class=lnt id=ienumusage-7><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-7> 7</a>
</span><span class=lnt id=ienumusage-8><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-8> 8</a>
</span><span class=lnt id=ienumusage-9><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-9> 9</a>
</span><span class=lnt id=ienumusage-10><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-10>10</a>
</span><span class=lnt id=ienumusage-11><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-11>11</a>
</span><span class=lnt id=ienumusage-12><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-12>12</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=kt>var</span> <span class=n>analyzerFix</span> <span class=p>=</span> <span class=k>new</span> <span class=n>CSharpCodeFixTest</span><span class=p>&lt;</span><span class=n>DevOnlyMigrateAnalyzer</span><span class=p>,</span> 
    <span class=n>DevOnlyMigrateCodeFixProvider</span><span class=p>,</span> <span class=n>MSTestVerifier</span><span class=p>&gt;</span>
<span class=p>{</span>
    <span class=n>TestState</span> <span class=p>=</span>
    <span class=p>{</span>
        <span class=n>Sources</span> <span class=p>=</span> <span class=p>{</span> <span class=n>sourceCode</span> <span class=p>}</span>
    <span class=p>},</span>
    <span class=n>FixedState</span> <span class=p>=</span>
    <span class=p>{</span>
        <span class=n>Sources</span> <span class=p>=</span> <span class=p>{</span> <span class=n>fixCode</span> <span class=p>}</span>
    <span class=p>}</span>
<span class=p>};</span></code></pre></td></tr></table>
</div>
</div></p>
<hr>
<h3 id=defining-the-diagnostics>Defining the diagnostics</h3>
<p>Next up is to define the diagnostics we expect the code to trigger.</p>
<h4 id=analyzer-diagnostics>Analyzer diagnostics</h4>
<p>With an <code>analyzer</code> test, the diagnostic id, severity and location of the expected diagnostics is specified:
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1>1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2>2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3>3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4>4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5>5</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=n>analyzerTest</span><span class=p>.</span><span class=n>ExpectedDiagnostics</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span>
    <span class=k>new</span> <span class=n>DiagnosticResult</span><span class=p>(</span>
        <span class=s>&#34;ADEF001&#34;</span><span class=p>,</span> 
        <span class=n>Microsoft</span><span class=p>.</span><span class=n>CodeAnalysis</span><span class=p>.</span><span class=n>DiagnosticSeverity</span><span class=p>.</span><span class=n>Warning</span>
    <span class=p>).</span><span class=n>WithLocation</span><span class=p>(</span><span class=m>18</span><span class=p>,</span> <span class=m>27</span><span class=p>));</span></code></pre></td></tr></table>
</div>
</div></p>
<h4 id=code-fix-diagnostics>Code fix diagnostics</h4>
<p>With a <code>code fix</code>, if the expectation is that there will still be diagnostics after the code fix has been applied, the ExpectedDiagnostics is set on the <strong>FixedState</strong>:
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1>1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2>2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3>3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4>4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5>5</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=n>analyzerFix</span><span class=p>.</span><span class=n>FixedState</span><span class=p>.</span><span class=n>ExpectedDiagnostics</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span>
    <span class=k>new</span> <span class=n>DiagnosticResult</span><span class=p>(</span>
        <span class=s>&#34;ADEF001&#34;</span><span class=p>,</span> 
        <span class=n>Microsoft</span><span class=p>.</span><span class=n>CodeAnalysis</span><span class=p>.</span><span class=n>DiagnosticSeverity</span><span class=p>.</span><span class=n>Warning</span>
    <span class=p>).</span><span class=n>WithLocation</span><span class=p>(</span><span class=m>18</span><span class=p>,</span> <span class=m>27</span><span class=p>));</span></code></pre></td></tr></table>
</div>
</div></p>
<p>No or multiple expected diagnostics can be specified.</p>
<hr>
<h3 id=additional-configuration>Additional configuration</h3>
<h4 id=net60-support>.NET6.0 support</h4>
<p>If the <strong>sourceCode</strong> (a string representation of C# code) contains any features specific to .NET6.0 (such as the no longer required Main method), the setup below needs to be done.</p>
<p>This specifies to the testing framework to include the additional package as part of the code when executing the analyzer:
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1> 1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2> 2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3> 3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4> 4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5> 5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6> 6</a>
</span><span class=lnt id=ienumusage-7><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-7> 7</a>
</span><span class=lnt id=ienumusage-8><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-8> 8</a>
</span><span class=lnt id=ienumusage-9><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-9> 9</a>
</span><span class=lnt id=ienumusage-10><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-10>10</a>
</span><span class=lnt id=ienumusage-11><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-11>11</a>
</span><span class=lnt id=ienumusage-12><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-12>12</a>
</span><span class=lnt id=ienumusage-13><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-13>13</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=kt>var</span> <span class=n>analyzerTest</span> <span class=p>=</span>  <span class=k>new</span> <span class=n>CSharpAnalyzerTest</span><span class=p>&lt;</span><span class=n>ConfigConnectionStringAnalyzer</span><span class=p>,</span> 
    <span class=n>MSTestVerifier</span><span class=p>&gt;</span>
<span class=p>{</span>
    <span class=n>TestState</span> <span class=p>=</span>
    <span class=p>{</span>
        <span class=n>Sources</span> <span class=p>=</span> <span class=p>{</span> <span class=n>sourceCode</span> <span class=p>},</span>
        <span class=n>ReferenceAssemblies</span> <span class=p>=</span> <span class=k>new</span> <span class=n>ReferenceAssemblies</span><span class=p>(</span>
            <span class=s>&#34;net6.0&#34;</span><span class=p>,</span> 
            <span class=k>new</span> <span class=n>PackageIdentity</span><span class=p>(</span>
                <span class=s>&#34;Microsoft.NETCore.App.Ref&#34;</span><span class=p>,</span> <span class=s>&#34;6.0.0&#34;</span><span class=p>),</span> 
                <span class=n>Path</span><span class=p>.</span><span class=n>Combine</span><span class=p>(</span><span class=s>&#34;ref&#34;</span><span class=p>,</span> <span class=s>&#34;net6.0&#34;</span><span class=p>))</span>
    <span class=p>}</span>
<span class=p>};</span></code></pre></td></tr></table>
</div>
</div></p>
<p>For a <code>code fix</code> test, the same needs to be applied to the <strong>FinalState</strong> if it makes use of the same .NET6.0 specific functionality.</p>
<h4 id=nuget-packages>Nuget Packages</h4>
<p>Sometimes additional packages are required for the <em>sourceCode</em> to successfully compile. In the sample code, for example, the EntityFramework Core references.</p>
<p>The required package names and version are specified and then added to the <em>TestState</em>.
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1> 1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2> 2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3> 3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4> 4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5> 5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6> 6</a>
</span><span class=lnt id=ienumusage-7><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-7> 7</a>
</span><span class=lnt id=ienumusage-8><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-8> 8</a>
</span><span class=lnt id=ienumusage-9><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-9> 9</a>
</span><span class=lnt id=ienumusage-10><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-10>10</a>
</span><span class=lnt id=ienumusage-11><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-11>11</a>
</span><span class=lnt id=ienumusage-12><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-12>12</a>
</span><span class=lnt id=ienumusage-13><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-13>13</a>
</span><span class=lnt id=ienumusage-14><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-14>14</a>
</span><span class=lnt id=ienumusage-15><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-15>15</a>
</span><span class=lnt id=ienumusage-16><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-16>16</a>
</span><span class=lnt id=ienumusage-17><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-17>17</a>
</span><span class=lnt id=ienumusage-18><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-18>18</a>
</span><span class=lnt id=ienumusage-19><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-19>19</a>
</span><span class=lnt id=ienumusage-20><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-20>20</a>
</span><span class=lnt id=ienumusage-21><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-21>21</a>
</span><span class=lnt id=ienumusage-22><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-22>22</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=c1>// include any nuget packages to reduce the number of errors
</span><span class=c1></span><span class=kt>var</span> <span class=n>packages</span> <span class=p>=</span> <span class=k>new</span><span class=p>[]</span> <span class=p>{</span>
    <span class=k>new</span> <span class=n>PackageIdentity</span><span class=p>(</span><span class=s>&#34;Microsoft.Extensions.Hosting&#34;</span><span class=p>,</span> <span class=s>&#34;6.0.0&#34;</span><span class=p>),</span>
    <span class=k>new</span> <span class=n>PackageIdentity</span><span class=p>(</span><span class=s>&#34;Microsoft.Extensions.Configuration&#34;</span><span class=p>,</span> <span class=s>&#34;6.0.0&#34;</span><span class=p>),</span>
    <span class=k>new</span> <span class=n>PackageIdentity</span><span class=p>(</span><span class=s>&#34;Microsoft.EntityFrameworkCore&#34;</span><span class=p>,</span> <span class=s>&#34;6.0.0&#34;</span><span class=p>),</span>
    <span class=k>new</span> <span class=n>PackageIdentity</span><span class=p>(</span><span class=s>&#34;Microsoft.EntityFrameworkCore.Sqlite&#34;</span><span class=p>,</span> <span class=s>&#34;6.0.0&#34;</span><span class=p>)</span>
<span class=p>}</span>
<span class=p>.</span><span class=n>ToImmutableArray</span><span class=p>();</span>

<span class=kt>var</span> <span class=n>analyzerTest</span> <span class=p>=</span>  <span class=k>new</span> <span class=n>CSharpAnalyzerTest</span><span class=p>&lt;</span><span class=n>DevOnlyMigrateAnalyzer</span><span class=p>,</span> <span class=n>MSTestVerifier</span><span class=p>&gt;</span>
<span class=p>{</span>
    <span class=n>TestState</span> <span class=p>=</span>
    <span class=p>{</span>
        <span class=n>Sources</span> <span class=p>=</span> <span class=p>{</span> <span class=n>sourceCode</span> <span class=p>},</span>
        <span class=n>ReferenceAssemblies</span> <span class=p>=</span> <span class=k>new</span> <span class=n>ReferenceAssemblies</span><span class=p>(</span>
            <span class=s>&#34;net6.0&#34;</span><span class=p>,</span> 
            <span class=k>new</span> <span class=n>PackageIdentity</span><span class=p>(</span>
                <span class=s>&#34;Microsoft.NETCore.App.Ref&#34;</span><span class=p>,</span> <span class=s>&#34;6.0.0&#34;</span><span class=p>),</span> 
                <span class=n>Path</span><span class=p>.</span><span class=n>Combine</span><span class=p>(</span><span class=s>&#34;ref&#34;</span><span class=p>,</span> <span class=s>&#34;net6.0&#34;</span><span class=p>))</span>
            <span class=p>.</span><span class=n>AddPackages</span><span class=p>(</span><span class=n>packages</span><span class=p>)</span>
    <span class=p>}</span>
<span class=p>};</span></code></pre></td></tr></table>
</div>
</div></p>
<blockquote>
<div>
<div style=width:5%;float:left;vertical-align:middle;padding-right:60px>
<i class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-info-circle" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><line x1="12" y1="8" x2="12.01" y2="8"/><polyline points="11 12 12 12 12 16 13 16"/></svg></i>
</div>
<div>
<p><p>Adding the packages to the tests is NOT required - if not added, the code simply wont compile, with the error: <strong><em>The type or namespace name &lsquo;XXX&rsquo; does not exist in the namespace</em></strong> &mldr;<br>
These errors could be added to the <em>ExpectedDiagnostics</em> collection and as the test now expects these to occur, the test will pass.</p>
<p>However the easier and more complete solution, is to rather just add the required packages instead of trying to cater for diagnostics not related to the <code>analyzer</code> or <code>code fix</code> being tested.</p>
</p>
</div>
</div>
</blockquote>
<h4 id=additional-files>Additional files</h4>
<p>Sometimes an analyzer will require additional files to successfully perform its function - such as checking the contents of the appsettings.json. To successfully be able to test this, additional files (names, and content) can be configured as part of the test.</p>
<p>This is done on the <em>TestState</em> or <em>FixedState</em>:</p>
<p>In the below sample, an additional file called <code>appsettings.json</code>, with <code>empty json</code> contents, is added to the test state.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1>1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2>2</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=n>analyzerTest</span><span class=p>.</span><span class=n>TestState</span>
    <span class=p>.</span><span class=n>AdditionalFiles</span><span class=p>.</span><span class=n>Add</span><span class=p>((</span><span class=s>&#34;appsettings.json&#34;</span><span class=p>,</span> <span class=s>&#34;{}&#34;</span><span class=p>));</span></code></pre></td></tr></table>
</div>
</div>
<h4 id=build-configuration>Build configuration</h4>
<p>In some use cases, such as one in the sample, the build configuration of the project makes a difference to how the analyzer performs.</p>
<p>To specify the build configuration, or any preprocessor symbols, the following is used:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt id=ienumusage-1><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-1>1</a>
</span><span class=lnt id=ienumusage-2><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-2>2</a>
</span><span class=lnt id=ienumusage-3><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-3>3</a>
</span><span class=lnt id=ienumusage-4><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-4>4</a>
</span><span class=lnt id=ienumusage-5><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-5>5</a>
</span><span class=lnt id=ienumusage-6><a style=outline:none;text-decoration:none;color:inherit href=#ienumusage-6>6</a>
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=n>analyzerTest</span><span class=p>.</span><span class=n>SolutionTransforms</span><span class=p>.</span><span class=n>Add</span><span class=p>((</span><span class=n>s</span><span class=p>,</span> <span class=n>p</span><span class=p>)</span> <span class=p>=&gt;</span>
<span class=p>{</span>
    <span class=k>return</span> <span class=n>s</span><span class=p>.</span><span class=n>WithProjectParseOptions</span><span class=p>(</span><span class=n>p</span><span class=p>,</span> 
        <span class=k>new</span> <span class=n>CSharpParseOptions</span><span class=p>()</span>
            <span class=p>.</span><span class=n>WithPreprocessorSymbols</span><span class=p>(</span><span class=s>&#34;DEBUG&#34;</span><span class=p>));</span>
<span class=p>});</span></code></pre></td></tr></table>
</div>
</div>
<hr>
<h2 id=next-steps-tips-and-tricks>Next steps: Tips and tricks</h2>
<p>The next and final <a class=link href=../analyzer-extra/>part in the series</a> will provider some collection of tips and tricks collected while working with <code>analyzers</code>.</p>
<h2 id=useful-links>Useful links</h2>
<p><a class=link href=https://github.com/dotnet/roslyn target=_blank rel=noopener>Roslyn repository</a><br>
<a class=link href=https://github.com/always-developing/CodeAnalysis.EntityFrameworkCore.Sample target=_blank rel=noopener>Sample analyzer and code fix repository</a></p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/c#/>c#</a>
<a href=/tags/.net/>.net</a>
<a href=/tags/roslyn/>roslyn</a>
<a href=/tags/codefix/>codefix</a>
<a href=/tags/code-fix/>code fix</a>
<a href=/tags/analyser/>analyser</a>
<a href=/tags/analyzer/>analyzer</a>
<a href=/tags/guide/>guide</a>
<a href=/tags/entity-framework/>entity framework</a>
<a href=/tags/entityframework/>entityframework</a>
<a href=/tags/ef/>ef</a>
<a href=/tags/analyzer-series/>analyzer-series</a>
</section>
</footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>Related contents</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/p/analyzer-code-fix/>
<div class=article-details>
<h2 class=article-title>Roslyn Analyzer - writing the code fix (Part 3)</h2>
</div>
</a>
</article>
<article>
<a href=/p/analyzer-write/>
<div class=article-details>
<h2 class=article-title>Roslyn Analyzer - writing the analyzer (Part 2)</h2>
</div>
</a>
</article>
<article>
<a href=/p/analyzer-explained/>
<div class=article-details>
<h2 class=article-title>Roslyn Analyzer - explained (Part 1)</h2>
</div>
</a>
</article>
<article>
<a href=/p/multiple-implementations/>
<div class=article-details>
<h2 class=article-title>Multiple implementations of same interface - the options</h2>
</div>
</a>
</article>
<article>
<a href=/p/vs-keyboard-shortcuts/>
<div class=article-details>
<h2 class=article-title>Useful Visual Studio keyboard shortcuts</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<script src=https://giscus.app/client.js data-repo=always-developing/always-developing.github.io data-repo-id=R_kgDOGQJLBQ data-category=Comments data-category-id=DIC_kwDOGQJLBc4B_pUA data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-theme=light crossorigin=anonymous async></script>
<script>function setGiscusTheme(b){let a=document.querySelector('iframe.giscus-frame');a&&a.contentWindow.postMessage({giscus:{setConfig:{theme:b}}},"https://giscus.app")}(function(){addEventListener('message',b=>{if(event.origin!=='https://giscus.app')return;a()}),window.addEventListener('onColorSchemeChange',a);function a(){document.documentElement.dataset.scheme==="light"?setGiscusTheme('light'):setGiscusTheme('dark')}})()</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 -
2022 Always Developing
</section>
<section class=powerby>
Always Developing | always learning | always growing <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.2.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#analyzer-unit-test-introduction>Analyzer unit test introduction</a></li>
<li><a href=#why-write-unit-tests>Why write unit tests?</a></li>
<li><a href=#default-unit-tests>Default unit tests</a>
<ol>
<li><a href=#wrapper-classes>Wrapper classes</a></li>
<li><a href=#complex-use-cases>Complex use cases</a></li>
</ol>
</li>
<li><a href=#enhanced-unit-tests>Enhanced unit tests</a>
<ol>
<li><a href=#defining-the-code>Defining the code</a>
<ol>
<li><a href=#analyzer-test-code>Analyzer test code</a></li>
<li><a href=#code-fix-test-code>Code fix test code</a></li>
</ol>
</li>
<li><a href=#defining-the-diagnostics>Defining the diagnostics</a>
<ol>
<li><a href=#analyzer-diagnostics>Analyzer diagnostics</a></li>
<li><a href=#code-fix-diagnostics>Code fix diagnostics</a></li>
</ol>
</li>
<li><a href=#additional-configuration>Additional configuration</a>
<ol>
<li><a href=#net60-support>.NET6.0 support</a></li>
<li><a href=#nuget-packages>Nuget Packages</a></li>
<li><a href=#additional-files>Additional files</a></li>
<li><a href=#build-configuration>Build configuration</a></li>
</ol>
</li>
</ol>
</li>
<li><a href=#next-steps-tips-and-tricks>Next steps: Tips and tricks</a></li>
<li><a href=#useful-links>Useful links</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>